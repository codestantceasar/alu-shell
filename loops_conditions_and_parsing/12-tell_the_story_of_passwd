#!/usr/bin/env bash
# This script reads the '/etc/passwd' file and displays user information in a formatted story-like manner

passwd_file="/etc/passwd"

# Check if the /etc/passwd file exists
if [ -e "$passwd_file" ]; then
    # Read the /etc/passwd file line by line using a while loop
    while IFS=: read -r username password uid gid gecos homedir shell; do
        # Check if the username is not empty (to avoid processing empty lines)
        if [ -n "$username" ]; then
            # Replace empty shell field with a default message
            if [ -z "$shell" ]; then
                shell="No shell assigned"
            fi

            # Replace empty gecos field with a default message
            if [ -z "$gecos" ]; then
                gecos="No additional information"
            fi

            # Display the formatted story-like sentence
            echo "The user $username is part of the $gid gang, lives in $homedir and rides $shell. $uid's place is protected by the passcode $password, more info about the user here: $gecos"
        fi
    done < "$passwd_file"
else
    echo "/etc/passwd file does not exist."
fi
